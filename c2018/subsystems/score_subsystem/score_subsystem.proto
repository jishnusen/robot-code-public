syntax = "proto2";

option cc_enable_arenas = true;

package c2018.score_subsystem;

enum ElevatorHeight {
  HEIGHT_0 = 0;
  HEIGHT_1 = 1;
  HEIGHT_2 = 2;
  HEIGHT_SCORE = 3;
}

enum ClawMode {
  SCORE_F = 0;
  SCORE_B = 1;
  VERTICAL = 2;
}

enum IntakeMode {
  INTAKE = 0;
  OUTTAKE = 1;
  IDLE = 2;
  HOLD = 3;
}

enum SystemState {
  INITIALIZING = 0;
  CALIBRATING = 1;
  MOVING = 2;
  SYSTEM_IDLE = 3;
  ENCODER_FAULT = 4;
  DISABLED = 5;
}

enum SubsystemState {
  ELEVATOR_UP = 0;
  WRIST_UP = 1;
  RUNNING = 2;
  SUBSYSTEM_DISABLED = 3;
}

message ScoreSubsystemInput {
  required double elevator_encoder = 1;
  required bool elevator_hall = 2;
  required double wrist_encoder = 3;
  required bool wrist_hall = 4;
  required double intake_current = 5;
  required bool has_cube = 6;
}

message ScoreSubsystemOutput {
  required double elevator_voltage = 1;
  required double intake_voltage = 2;
  required double wrist_voltage = 3;
  required bool claw_pinch = 4;
}

message ScoreSubsystemGoal {
  optional ElevatorHeight elevator_height = 1;
  optional ClawMode claw_mode = 2;
  optional IntakeMode intake_mode = 3;
  optional double elevator_velocity = 4;
  optional double intake_voltage = 5;
  required bool god_mode = 6;
}

message ScoreSubsystemStatus {
  required double elevator_actual_height = 1;
  required double estimated_velocity = 2;
  required bool elevator_at_top = 3;
  required SystemState elevator_state = 4;
  required double elevator_voltage_error = 5;
  required double elevator_uncapped_voltage = 6;
  required double elevator_profiled_goal = 7;
  required double elevator_unprofiled_goal = 8;
  required bool elevator_encoder_fault_detected = 9;
  required bool elevator_calibrated = 10;
  required double wrist_position = 11;
  required double wrist_velocity = 12;
  required bool wrist_calibrated = 13;
  required SystemState claw_state = 14;
  required SubsystemState subsystem_state = 15;
}

